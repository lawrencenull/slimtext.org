(function(){var n;window.full_window=function(){return window.layout.state.north.isVisible?window.layout.close("north"):void 0},window.exit_full_window=function(){return window.layout.state.north.isClosed?window.layout.open("north"):void 0},window.editor.commands.addCommand({name:"saveCommand",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(){return window.save_file()},readOnly:!1}),window.editor.commands.addCommand({name:"exitFullWindowCommand",bindKey:{win:"Esc",mac:"Esc"},exec:function(){return window.exit_full_window()}}),n=_.debounce(function(){return 0!==document.title.indexOf("* ")?document.title="* "+document.title:void 0},500,!0),window.editor.getSession().on("change",function(){return n(),window.editor.focus()}),$("body").on("click",".file-link",function(){return window.open_path($(this).data("path"))}),$("body").on("click",".full_window_btn",function(){return window.full_window()}),$("body").on("click",".save_btn",function(){return window.save_file()}),$("body").on("click",".mode-link",function(){return window.editor.getSession().setMode("ace/mode/"+$(this).data("mode"))}),$("body").on("click",".options_btn",function(){return chrome.tabs.create({url:chrome.extension.getURL("html/options.html")})}),$("body").on("click",".about_btn",function(){return window.notice("Slim Text "+chrome.app.getDetails().version,"Copyright @ 2012 - 2013 slimtext.org",5e3)}),$("body").on("change","#drives_select",function(){return window.open_path($(this).val())}),$("body").on("click",".remove_lines_btn",function(){return window.editor.removeLines()}),$("body").on("click",".lower_case_btn",function(){return window.editor.toLowerCase()}),$("body").on("click",".upper_case_btn",function(){return window.editor.toUpperCase()}),$("body").on("click",".toggle_comment_btn",function(){return window.editor.toggleCommentLines()}),$("body").on("click",".indent_btn",function(){return window.editor.indent()}),$("body").on("click",".outdent_btn",function(){return window.editor.blockOutdent()}),window.onbeforeunload=function(){return chrome.storage.local.set({path:window.storage.path,file:window.storage.file}),0===document.title.indexOf("* ")?'"'+window.storage.file+'" '+chrome.i18n.getMessage("save_before_leaving"):void 0},chrome.omnibox.onInputEntered.addListener(function(n){return chrome.tabs.getCurrent(function(o){return chrome.tabs.query({currentWindow:!0,active:!0},function(e){var t,i,d,r;if(e[0].id===o.id)switch(n=n.replace(/\s{2,}/g," "),r=n.split(" "),i=r[0],d=_.rest(r).join(" "),i){case"save":return window.save_file();case"open":case"cd":return 0===d.indexOf("/")||1===d.indexOf(":/")?window.open_path(d):(t=window.combine_path(window.storage.path,d),""!==t?window.open_path(t):window.notice(chrome.i18n.getMessage("does_not_exist"),d));default:return window.notice(chrome.i18n.getMessage("command_not_found"),i)}})})})}).call(this);